> منها ما يتعلق بالكود ومنها ما يتعلق بال UX

`$= dv.current().file.tasks.where(t => t.text).length` total tasks, `$= dv.current().file.tasks.where(t => t.completed).length` completed
---

https://claude.ai/chat/82724d47-95a4-4542-8bf0-a115ec8b8855

- [ ] Fix Db singleton pattern (prevents bugs)
- [ ] Consolidate theme management
- [ ] Improve error handling
- [ ] Remove `currentEntry` from EntriesState (unused complexity)
- [ ] Stop calling `add()` from within BLoC event handlers
- [ ] Extract duplicate query building logic in repositories
- [ ] Replace StreamSubscription with BlocListener in UI  

   ---
https://claude.ai/chat/c91ff0b7-7b1d-4a05-9dd8-8bf20a6b598b

- [ ] **Extract `SecurityService`** from repository abstract class
- [ ] **Remove static methods** from `BiometricService` - make it injectable
- [ ] **Add repository methods** for all database operations (remove direct DB access from BLoC)
- [ ] **Implement custom exceptions** for better error handling
- [ ] **Add `copyWith`** to `AuthAuthenticated` state for partial updates
- [ ] **Move business logic** from UI to BLoC
- [ ] **Create use cases** for complex operations like export

## UX
- [ ] **Replace popup errors with snackbars** - Popups are jarring and block the entire screen
- [ ] **Add PIN progress indicator** - Users need to see how many digits they've entered
- [ ] **Show last user quick-select** - Returning users shouldn't retype their name
- [ ] **Display biometric type with icon** - Show "Face ID" or "Fingerprint" so users know what will happen
- [ ] **Add form validation checklist** - Show requirements (2+ chars for name, exactly 4 for PIN) as user types
- [ ] **Show loading state during auth** - Users need to know biometric check is processing, prevent double-tap
- [ ] **Reorganize profile into sections** - Group related settings (Security, Stats, Data) instead of flat list

---
https://claude.ai/chat/be0992fa-9976-4163-80d5-25fd8512a6f8

- [ ] Add debouncing to search input
- [ ] Fix SQL duplication in provider
- [ ] Improve pagination logic
- [ ] Add active filters chips

---
https://claude.ai/chat/a272e091-aeda-4816-b033-dd6c02afadf5

- [ ] Add proper loading/error states to UI
- [ ] Fix repository O(n²) complexity issue
- [ ] Add empty state handling
- [ ] Fix memory leak with stream subscription